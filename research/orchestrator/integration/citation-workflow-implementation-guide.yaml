# Citation Workflow Implementation Guide
# CRITICAL INTEGRATION FIX #4: Practical implementation of citation system in orchestrator workflow
# Version: 1.0.0 - Implementation Instructions
# Updated: 2025-07-30

metadata:
  version: "1.0.0"
  purpose: "Practical guide for implementing citation compliance in orchestrator workflow"
  target_users: ["AI agents", "research orchestrator", "method execution systems"]
  integration_dependencies:
    - "citation-compliance-orchestrator-integration.yaml"
    - "method-compliance-template-enhanced.yaml"
    - "enhanced-citation-framework.yaml"
    - "claude-orchestrator-integration.yaml"

# STEP-BY-STEP IMPLEMENTATION WORKFLOW
orchestrator_workflow_with_citation_integration:
  step_1_context_analysis_implementation:
    process_description: "Analyze research context and determine citation compliance requirements"
    
    practical_implementation:
      extract_research_context:
        user_request_analysis: "Parse user request for domain indicators (academic, business, technical, policy)"
        complexity_assessment: "Assess research complexity including citation verification requirements"
        stakeholder_identification: "Identify target audience and associated citation standards"
        quality_requirements_determination: "Determine quality level and associated citation integrity needs"
        
      apply_citation_context_rules:
        academic_research_domain: 
          citation_standards: "academic"
          credibility_threshold: 0.90
          source_diversity_requirement: "extensive"  
          verification_level: "comprehensive"
          
        business_intelligence_domain:
          citation_standards: "industry"
          credibility_threshold: 0.85
          source_diversity_requirement: "moderate"
          verification_level: "high"
          
        technical_analysis_domain:
          citation_standards: "technical"
          credibility_threshold: 0.88
          source_diversity_requirement: "moderate"
          verification_level: "comprehensive"
          
        policy_research_domain:
          citation_standards: "policy"
          credibility_threshold: 0.92
          source_diversity_requirement: "comprehensive"
          verification_level: "maximum"
    
    output_generation:
      enhanced_context_analysis:
        complexity_level: "simple|moderate|complex"
        domain_type: "academic|business|technical|policy|mixed"
        citation_standards_required: "academic|industry|technical|policy|mixed"
        credibility_threshold: "0.80-0.95 based on domain and quality requirements"
        source_diversity_requirement: "minimal|moderate|extensive|comprehensive"
        verification_level: "basic|high|comprehensive|maximum"
        multi_source_validation_threshold: "minimum 3-5 sources for key claims"
        
    ai_agent_instructions:
      - "Load research/orchestrator/citation-system/enhanced-citation-framework.yaml"
      - "Apply citation_context_assessment rules based on research domain"
      - "Set credibility thresholds and verification levels according to quality requirements"
      - "Document citation requirements in context analysis output"
      - "Ensure citation standards align with domain expectations"

  step_2_method_selection_implementation:
    process_description: "Select research methods with embedded citation compliance capabilities"
    
    practical_implementation:
      load_method_citation_profiles:
        constitutional_ai_profile:
          citation_compliance_enhancement: "systematic_self_evaluation_with_source_verification"
          optimal_contexts: ["high-stakes research", "ethical considerations", "quality-critical analysis"]
          citation_transparency_score: 0.95
          implementation_note: "Includes built-in source validation and citation integrity checking"
          
        multi_perspective_approach_profile:
          citation_compliance_enhancement: "cross_perspective_source_validation_and_triangulation"
          optimal_contexts: ["balanced analysis", "multiple stakeholder research", "comprehensive evaluations"]
          citation_transparency_score: 0.92
          implementation_note: "Requires independent source validation for each perspective"
          
        complex_research_profile:
          citation_compliance_enhancement: "modular_citation_tracking_and_cross_module_validation"
          optimal_contexts: ["strategic analysis", "multi-faceted research", "systematic studies"]
          citation_transparency_score: 0.90
          implementation_note: "Implements module-specific citation tracking with integration validation"
          
      apply_citation_weighted_selection:
        method_selection_algorithm: |
          def select_methods_with_citation_compliance(context, methods_available):
              scored_methods = []
              for method in methods_available:
                  base_fit_score = calculate_context_fit(method, context)
                  citation_compliance_bonus = method.citation_transparency_score * 0.2
                  total_score = base_fit_score + citation_compliance_bonus
                  scored_methods.append((method, total_score))
              return sorted(scored_methods, key=lambda x: x[1], reverse=True)
        
        enhancement_method_requirements:
          if_quality_critical: "Add constitutional_ai for citation validation"
          if_cross_domain: "Add multi_perspective_approach for diverse source validation"
          if_complex_research: "Add self_consistency for cross-validation"
          mandatory_for_all: "Real-time citation monitoring throughout execution"
    
    output_generation:
      citation_enhanced_method_selection:
        primary_methods: ["method_name with citation_compliance_score"]
        enhancement_methods: ["citation-focused enhancements"]
        citation_validation_methods: ["constitutional_ai", "self_consistency", "real_time_monitoring"]
        execution_pattern: "sequential|parallel|hybrid with citation checkpoints"
        citation_compliance_plan: "detailed plan for maintaining citation integrity"
        estimated_duration_with_citation_overhead: "time estimate including validation time"
        
    ai_agent_instructions:
      - "Load research/orchestrator/config/selection-rules.yaml"
      - "Apply citation_aware_method_selection rules"
      - "Weight method selection by citation_transparency_score"
      - "Ensure citation validation methods are included for quality requirements"
      - "Document citation compliance plan in method selection output"

  step_3_5_source_discovery_implementation:
    process_description: "Enhanced source discovery with real-time citation compliance tracking"
    
    practical_implementation:
      apply_unified_source_discovery_with_citation_enhancement:
        load_source_discovery_framework: "meta/information-access/source-discovery-framework.yaml"
        enhance_with_citation_requirements:
          technology_specific_routing:
            apply_credibility_filtering: "Filter sources by minimum credibility thresholds"
            verify_source_independence: "Verify independence of selected sources"
            assess_citation_format_compatibility: "Ensure sources support required citation formats"
            
          category_pattern_routing:
            apply_domain_credibility_standards: "Apply domain-specific credibility requirements"
            ensure_source_diversity: "Ensure adequate diversity for triangulation"
            validate_access_stability: "Validate source accessibility and link stability"
            
        initialize_citation_tracking:
          source_provenance_tracking: "Initialize tracking for each discovered source"
          credibility_score_calculation: "Calculate initial credibility scores"
          independence_verification: "Verify source independence requirements"
          citation_format_preparation: "Prepare proper citation formats"
    
    enhanced_source_coordination:
      primary_source_selection_with_credibility:
        minimum_credibility_threshold: "Apply domain-specific thresholds (0.80-0.95)"
        authority_verification: "Verify source authority and expertise"
        access_stability_confirmation: "Confirm stable access and link availability"
        
      supplementary_source_diversification:
        independence_verification: "Verify supplementary sources are independent"
        perspective_diversity_validation: "Validate diverse perspectives represented"
        temporal_distribution_assessment: "Assess temporal distribution of sources"
        
      validation_source_coordination:
        cross_validation_capability: "Select sources capable of cross-validating key claims"
        conflict_detection_preparation: "Prepare for potential conflict detection"
        expert_source_identification: "Identify expert sources for authoritative validation"
    
    output_generation:
      citation_enhanced_source_portfolio:
        primary_sources: "1-2 high-credibility authoritative sources with credibility scores"
        supplementary_sources: "3-5 diverse supporting sources with independence verification"
        validation_sources: "2-3 cross-validation sources with conflict detection capability"
        fallback_sources: "backup sources maintaining quality standards"
        
      citation_tracking_initialization:
        source_provenance_chains: "initialized provenance tracking for each source"
        credibility_assessment_results: "initial credibility scores and rationale"
        independence_verification_status: "verification results for source independence"
        citation_format_standards: "standardized citation formats for each source"
        
    ai_agent_instructions:
      - "Load meta/information-access/source-discovery-framework.yaml"
      - "Apply technology_mappings with credibility filtering"
      - "Initialize citation tracking using research/orchestrator/citation-system/"
      - "Verify source independence and calculate credibility scores"
      - "Prepare citation formats according to domain standards"

  step_4_research_execution_implementation:
    process_description: "Execute research methods with continuous citation integrity monitoring"
    
    practical_implementation:
      method_specific_citation_integration:
        constitutional_ai_with_enhanced_citations:
          constitutional_principle_citation_validation:
            accuracy_principle: "Verify all factual claims through multi-source validation"
            objectivity_principle: "Validate balanced sourcing and diverse perspective citation"
            transparency_principle: "Document complete citation methodology and rationale"
            completeness_principle: "Verify comprehensive source coverage and identify gaps"
            responsibility_principle: "Assess source credibility and acknowledge potential bias"
            integrity_principle: "Acknowledge source limitations and uncertainty explicitly"
            
          implementation_steps:
            - "Load constitutional principles with citation standards"
            - "Execute research with source verification for each principle"
            - "Conduct self-evaluation including citation integrity assessment"
            - "Apply corrections including citation quality improvements"
            - "Validate results including comprehensive source verification"
            - "Document compliance including citation methodology"
            
        multi_perspective_approach_with_citation_coordination:
          perspective_specific_implementation:
            perspective_1_quantitative:
              source_requirements: "Statistical databases, research reports, numerical data sources"
              validation_approach: "Cross-verify numerical claims across multiple statistical sources"
              citation_standards: "Include data source, methodology, sample size, confidence intervals"
              
            perspective_2_qualitative:
              source_requirements: "Expert interviews, case studies, qualitative research reports"
              validation_approach: "Verify expert credentials and cross-reference qualitative findings"
              citation_standards: "Include expert credentials, methodology, data collection approach"
              
            perspective_3_industry_practice:
              source_requirements: "Industry reports, practitioner guides, case studies"
              validation_approach: "Verify industry authority and cross-check practical recommendations"
              citation_standards: "Include industry authority, publication date, scope of analysis"
              
            perspective_4_future_trends:
              source_requirements: "Trend analysis, forecasting reports, expert predictions"
              validation_approach: "Assess prediction methodology and track record of forecasting sources"
              citation_standards: "Include forecasting methodology, time horizon, uncertainty acknowledgment"
              
          cross_perspective_validation:
            - "Verify source independence across perspectives"
            - "Validate consistency of findings where perspectives overlap"
            - "Detect and resolve conflicts between perspective-specific sources"
            - "Synthesize perspectives with comprehensive attribution"
    
    continuous_citation_monitoring:
      real_time_validation_checkpoints:
        25_percent_checkpoint:
          validation_actions:
            - "Assess source verification progress and credibility coverage"
            - "Validate citation format compliance and attribution completeness"
            - "Check source diversity and independence requirements"
            - "Identify and address any citation gaps or issues"
            
        50_percent_checkpoint:
          validation_actions:
            - "Evaluate source triangulation and cross-validation effectiveness"
            - "Assess conflict detection and resolution progress"
            - "Validate attribution chain maintenance and transparency"
            - "Review credibility assessment results and threshold compliance"
            
        75_percent_checkpoint:
          validation_actions:
            - "Verify comprehensive source coverage and validation completion"
            - "Assess citation integrity and format compliance"
            - "Validate conflict resolution and uncertainty acknowledgment"
            - "Prepare for final citation validation and synthesis"
            
      intervention_trigger_implementation:
        credibility_degradation_response:
          trigger: "Source credibility drops below domain threshold"
          action: "Pause research, assess source reliability, seek alternative sources"
          
        conflict_severity_response:
          trigger: "High-severity conflicts detected between sources"
          action: "Initiate conflict resolution process, consult authoritative sources"
          
        independence_failure_response:
          trigger: "Source independence requirements not met"
          action: "Identify additional independent sources, verify source relationships"
          
        attribution_gap_response:
          trigger: "Attribution gaps or inconsistencies detected"
          action: "Complete attribution tracking, verify source contribution documentation"
    
    output_generation:
      method_execution_with_citation_validation:
        research_findings: "findings with comprehensive source attribution"
        citation_validation_results: "results of continuous validation throughout execution"
        source_verification_summary: "summary of source verification and credibility assessment"
        conflict_resolution_documentation: "documentation of conflicts detected and resolved"
        attribution_chain_completion: "complete attribution chains for all findings"
        
    ai_agent_instructions:
      - "Load method-specific files with citation enhancement requirements"
      - "Implement continuous citation monitoring during method execution"
      - "Apply validation checkpoints at 25%, 50%, 75% completion"
      - "Respond to intervention triggers with appropriate citation actions"
      - "Maintain attribution chains and documentation throughout execution"

  step_5_synthesis_implementation:
    process_description: "Synthesize research findings with comprehensive citation validation"
    
    practical_implementation:
      citation_informed_synthesis_process:
        source_weighted_integration:
          weight_findings_by_credibility: "Weight research findings by source credibility scores"
          prioritize_high_confidence_sources: "Prioritize findings from high-confidence, verified sources"
          acknowledge_low_confidence_findings: "Explicitly acknowledge findings with lower confidence"
          
        conflict_resolved_synthesis:
          integrate_after_resolution: "Integrate findings only after resolving source conflicts"
          document_resolution_rationale: "Document rationale for conflict resolution decisions"
          acknowledge_unresolved_conflicts: "Explicitly acknowledge any unresolved conflicts"
          
        attribution_preserved_integration:
          maintain_source_attribution: "Maintain clear source attribution throughout synthesis"
          preserve_attribution_chains: "Preserve complete attribution chains in integrated findings"
          ensure_transparency: "Ensure transparency of source influence on conclusions"
          
      comprehensive_final_validation:
        final_source_verification:
          verify_all_cited_sources: "Final verification of all sources for accessibility and accuracy"
          validate_citation_formats: "Validate all citations meet domain-specific format requirements"
          check_attribution_completeness: "Check completeness of attribution for all findings"
          
        credibility_assessment_finalization:
          finalize_credibility_scores: "Finalize credibility assessments with comprehensive scoring"
          document_assessment_rationale: "Document rationale for credibility assessments"
          validate_threshold_compliance: "Validate all sources meet minimum credibility thresholds"
          
        independence_and_conflict_validation:
          complete_independence_verification: "Complete independence verification across all sources"
          validate_conflict_resolution: "Validate that all significant conflicts have been resolved"
          document_uncertainty_acknowledgment: "Document acknowledgment of source limitations and uncertainty"
    
    output_generation:
      synthesis_with_comprehensive_citation_validation:
        integrated_findings: "research findings with source-weighted integration"
        citation_validation_certification: "certification of citation integrity and compliance"
        source_credibility_summary: "summary of source credibility assessments and validation"
        attribution_transparency_documentation: "documentation of transparent attribution methodology"
        conflict_resolution_summary: "summary of conflicts detected, resolved, and acknowledged"
        
    ai_agent_instructions:
      - "Apply source_weighted_synthesis based on credibility scores"
      - "Integrate findings only after conflict resolution"
      - "Maintain attribution chains throughout synthesis"
      - "Complete final validation of all citation requirements"
      - "Generate comprehensive citation validation certification"

  step_6_final_validation_implementation:
    process_description: "Final validation with comprehensive citation integrity certification"
    
    practical_implementation:
      citation_integrity_certification_process:
        multi_dimensional_validation_execution:
          source_credibility_certification:
            verify_credibility_thresholds: "Verify all sources meet domain-specific credibility requirements"
            validate_assessment_methodology: "Validate credibility assessment methodology was properly applied"
            document_credibility_rationale: "Document rationale for credibility determinations"
            
          independence_verification_certification:
            verify_independence_standards: "Verify source independence meets validation requirements"
            validate_relationship_analysis: "Validate source relationship analysis was comprehensive"
            document_independence_assessment: "Document independence assessment methodology and results"
            
          conflict_resolution_certification:
            verify_conflict_detection: "Verify all significant conflicts were detected and addressed"
            validate_resolution_methodology: "Validate conflict resolution methodology was appropriate"
            document_resolution_decisions: "Document all conflict resolution decisions and rationale"
            
          attribution_transparency_certification:
            verify_attribution_completeness: "Verify attribution is complete for all research findings"
            validate_transparency_standards: "Validate attribution transparency meets academic standards"
            document_attribution_methodology: "Document attribution methodology and tracking approach"
        
        constitutional_ai_citation_integration_validation:
          principle_citation_compliance_verification:
            accuracy_compliance: "Verify citation contribution to accuracy principle compliance"
            objectivity_compliance: "Verify citation contribution to objectivity principle compliance"
            transparency_compliance: "Verify citation contribution to transparency principle compliance"
            completeness_compliance: "Verify citation contribution to completeness principle compliance"
            
          integration_effectiveness_assessment:
            citation_constitutional_alignment: "Assess alignment of citation system with constitutional principles"
            compliance_enhancement_measurement: "Measure citation system contribution to overall compliance"
            integration_quality_evaluation: "Evaluate quality of citation-constitutional integration"
    
    final_quality_metrics_calculation:
      citation_compliance_metrics:
        source_verification_accuracy: "Calculate percentage of sources successfully verified"
        citation_integrity_score: "Calculate overall citation integrity score"
        attribution_completeness_ratio: "Calculate ratio of properly attributed content"
        conflict_resolution_effectiveness: "Calculate effectiveness of conflict resolution"
        
      performance_target_validation:
        verify_95_percent_source_verification: "Verify ≥95% source verification accuracy achieved"
        verify_98_percent_citation_integrity: "Verify ≥98% citation integrity score achieved"
        verify_98_percent_attribution_completeness: "Verify ≥98% attribution completeness achieved"
        verify_90_percent_conflict_resolution: "Verify ≥90% conflict resolution effectiveness achieved"
    
    output_generation:
      final_validation_with_citation_certification:
        citation_integrity_certification: "comprehensive certification of citation integrity"
        constitutional_compliance_validation: "validation of constitutional AI citation integration"
        performance_metrics_summary: "summary of citation performance against targets"
        quality_assurance_documentation: "documentation of quality assurance processes"
        compliance_score_calculation: "calculation of integrated compliance scores"
        
    ai_agent_instructions:
      - "Execute multi_dimensional_validation for all citation components"
      - "Verify constitutional_ai_citation_integration compliance"
      - "Calculate final citation compliance metrics"
      - "Validate performance against target thresholds"
      - "Generate comprehensive citation integrity certification"

# PRACTICAL INTEGRATION EXAMPLES
implementation_examples:
  constitutional_ai_with_citation_integration_example:
    scenario: "High-stakes research requiring maximum citation integrity"
    
    step_by_step_implementation:
      step_1_enhanced_context_analysis:
        input: "Research AI safety implications for autonomous vehicles"
        citation_context_assessment:
          domain_type: "technical + policy"
          credibility_threshold: 0.92
          source_diversity_requirement: "comprehensive"
          verification_level: "maximum"
          
      step_2_method_selection_with_citations:
        selected_methods:
          primary: "constitutional_ai (citation_transparency_score: 0.95)"
          enhancement: "multi_perspective_approach (for diverse technical and policy sources)"
          validation: "self_consistency (for cross-validation of safety claims)"
          
      step_3_5_source_discovery_with_tracking:
        source_portfolio:
          primary_sources: "IEEE papers on autonomous vehicle safety (credibility: 0.94)"
          supplementary_sources: "Government safety regulations, industry reports (credibility: 0.89)"
          validation_sources: "Expert interviews, safety incident databases (credibility: 0.87)"
          
      step_4_execution_with_monitoring:
        constitutional_principle_citation_integration:
          accuracy_principle: "Multi-source verification of safety statistics and technical claims"
          objectivity_principle: "Balanced sourcing from academia, government, and industry"
          transparency_principle: "Complete documentation of source selection and evaluation methodology"
          
        continuous_monitoring_checkpoints:
          25_percent: "Verified 15 sources, credibility average 0.91, no conflicts detected"
          50_percent: "Cross-validated safety claims, resolved 2 minor conflicts, attribution tracking active"
          75_percent: "Comprehensive source coverage achieved, final conflict resolution complete"
          
      step_5_synthesis_with_validation:
        citation_informed_synthesis:
          source_weighted_findings: "Safety recommendations weighted by source authority and credibility"
          conflict_resolved_integration: "Technical and policy perspectives integrated after conflict resolution"
          comprehensive_attribution: "Complete attribution chains for all safety claims and recommendations"
          
      step_6_final_certification:
        citation_integrity_metrics:
          source_verification_accuracy: 0.97 # Target: ≥0.95
          citation_integrity_score: 0.96 # Target: ≥0.95
          attribution_completeness: 0.98 # Target: ≥0.98
          conflict_resolution_effectiveness: 0.93 # Target: ≥0.90
          
        constitutional_compliance_integration: 0.96 # Target: ≥0.95

  multi_perspective_approach_with_citation_coordination_example:
    scenario: "Business intelligence research requiring diverse stakeholder perspectives"
    
    implementation_summary:
      context_analysis: "Remote work impact on organizational productivity"
      method_selection: "multi_perspective_approach + constitutional_ai validation"
      source_coordination: "Perspective-specific sources with cross-validation"
      execution_monitoring: "Independent source validation per perspective"
      synthesis_validation: "Cross-perspective triangulation and attribution"
      final_certification: "Comprehensive citation compliance across all perspectives"

# ERROR HANDLING AND TROUBLESHOOTING
error_handling_procedures:
  common_citation_integration_issues:
    source_verification_failure:
      symptoms: "Sources fail accessibility or credibility verification"
      diagnosis: "Check source URLs, assess credibility scoring methodology"
      resolution: "Identify alternative sources, adjust credibility thresholds if appropriate"
      prevention: "Implement redundant source identification, regular accessibility monitoring"
      
    conflict_resolution_difficulties:
      symptoms: "Unable to resolve conflicts between authoritative sources"
      diagnosis: "Assess conflict severity, examine source independence and credibility"
      resolution: "Consult additional expert sources, acknowledge uncertainty where appropriate"
      prevention: "Improve source independence verification, develop conflict resolution protocols"
      
    attribution_chain_breaks:
      symptoms: "Attribution chains incomplete or inconsistent"
      diagnosis: "Review attribution tracking methodology, check documentation completeness"
      resolution: "Reconstruct attribution chains, improve tracking procedures"
      prevention: "Implement real-time attribution monitoring, automated consistency checking"
      
    performance_overhead_excessive:
      symptoms: "Citation validation significantly slows research execution"
      diagnosis: "Assess validation complexity, identify performance bottlenecks"
      resolution: "Optimize validation algorithms, implement parallel processing where possible"
      prevention: "Design efficient validation workflows, balance thoroughness with performance"

# SUCCESS CRITERIA VALIDATION
implementation_success_validation:
  integration_completeness_checklist:
    - [ ] Citation requirements integrated into all orchestrator workflow steps
    - [ ] Method compliance template enhanced with citation validation
    - [ ] Real-time citation monitoring implemented throughout execution
    - [ ] Constitutional AI principles aligned with citation integrity requirements
    - [ ] Source discovery enhanced with credibility assessment and independence verification
    - [ ] Method execution includes continuous citation validation checkpoints
    - [ ] Synthesis process maintains attribution chains and source weighting
    - [ ] Final validation includes comprehensive citation integrity certification
    
  performance_target_validation:
    - [ ] Source verification accuracy ≥95%
    - [ ] Citation integrity score ≥95%
    - [ ] Attribution completeness ≥98%
    - [ ] Conflict resolution effectiveness ≥90%
    - [ ] Constitutional AI citation integration ≥95%
    - [ ] User workflow integration satisfaction ≥90%
    - [ ] Research quality improvement 10-15% demonstrated
    
  deployment_readiness_criteria:
    - [ ] All integration files created and validated
    - [ ] Implementation examples tested and verified
    - [ ] Error handling procedures documented and tested
    - [ ] Performance optimization completed and validated
    - [ ] User documentation and training materials prepared
    - [ ] Success metrics monitoring system implemented
EOF < /dev/null